from vlmeval.smp import *
from vlmeval.api.base import BaseAPI
from openai import OpenAI
import base64
import logging
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')

### MMDU dataset image mapping(from image name to web path)
im2url = {'ILSVRC2012_val_00015250.JPEG': 'https://live.staticflickr.com/65535/53771137583_473f2b25eb_o_d.jpg', 'ILSVRC2012_val_00011217.JPEG': 'https://live.staticflickr.com/65535/53770932366_0a6d676c0e_o_d.jpg', 'ILSVRC2012_val_00011038.JPEG': 'https://live.staticflickr.com/65535/53771351935_7aabfa5c55_o_d.jpg', 'ILSVRC2012_val_00009104.JPEG': 'https://live.staticflickr.com/65535/53770020637_69b79a84d0_o_d.jpg', '22_634_46924991935_3e3a09bb7a_c.jpg': 'https://live.staticflickr.com/65535/53771261129_8164360abd_o_d.jpg', '11_970_1337241238_b29b0f16f8_c.jpg': 'https://live.staticflickr.com/65535/53770932376_9c6b0dbd23_o_d.jpg', '10_1156_6274327525_767b933bfe_c.jpg': 'https://live.staticflickr.com/65535/53771137598_95f96b9512_o_d.jpg', '8_127_357008895_24ba4510da_c.jpg': 'https://live.staticflickr.com/65535/53770932411_b8a0615a59_o_d.jpg', '7_2005_5317851926_8d61274098_c.jpg': 'https://live.staticflickr.com/65535/53771137628_0feb5abf01_o_d.jpg', 'ILSVRC2012_val_00018014.JPEG': 'https://live.staticflickr.com/65535/53770020672_92c02fda8a_o_d.jpg', 'ILSVRC2012_val_00015544.JPEG': 'https://live.staticflickr.com/65535/53770020682_935bdd51aa_o_d.jpg', '3403012.jpg': 'https://live.staticflickr.com/65535/53771261059_fece18a232_o_d.jpg', '3186969.jpg': 'https://live.staticflickr.com/65535/53771261064_115f634ddc_o_d.jpg', '1814986.jpg': 'https://live.staticflickr.com/65535/53771137463_df5ff149f1_o_d.jpg', '1804724.jpg': 'https://live.staticflickr.com/65535/53771351810_d82076e7eb_o_d.jpg', '1766448.jpg': 'https://live.staticflickr.com/65535/53770932241_61b64af582_o_d.jpg', '1682911.jpg': 'https://live.staticflickr.com/65535/53771137473_f7c0462b6f_o_d.jpg', '1427390.jpg': 'https://live.staticflickr.com/65535/53770932236_2ab3a98bc1_o_d.jpg', '1022479.jpg': 'https://live.staticflickr.com/65535/53771351840_60a74a8eb8_o_d.jpg', '682627.jpg': 'https://live.staticflickr.com/65535/53771351845_e5f0506b64_o_d.jpg', '408666.jpg': 'https://live.staticflickr.com/65535/53770932281_fe5bebd1f1_o_d.jpg', '3610775.jpg': 'https://live.staticflickr.com/65535/53770020562_599f5751c8_o_d.jpg', '3572271.jpg': 'https://live.staticflickr.com/65535/53770932291_88d0e9f777_o_d.jpg', '17_936_3646317018_553867f082_c.jpg': 'https://live.staticflickr.com/65535/53771260989_c1deffd11c_o_d.jpg', '12_2685_2264151502_c406080ebc_c.jpg': 'https://live.staticflickr.com/65535/53771260994_4da32a1705_o_d.jpg', 'volin.jpg': 'https://live.staticflickr.com/65535/53770020422_8a9b59d244_o_d.jpg', 'ibanez.jpg': 'https://live.staticflickr.com/65535/53771137373_60722dc239_o_d.jpg', 'Accordion.jpg': 'https://live.staticflickr.com/65535/53770932146_dd4b482990_o_d.jpg', '000013869.jpg': 'https://live.staticflickr.com/65535/53771351690_704cacd2b9_o_d.jpg', '000013244.jpg': 'https://live.staticflickr.com/65535/53771351680_3908f9d4e8_o_d.jpg', '000013226.jpg': 'https://live.staticflickr.com/65535/53771137413_58f5d5f734_o_d.jpg', '29_1713_529016050_cd336771a6_c.jpg': 'https://live.staticflickr.com/65535/53770932156_344e51ca48_o_d.jpg', '17_946_3090741492_34ff65ccd6_c.jpg': 'https://live.staticflickr.com/65535/53770020457_af52a18237_o_d.jpg', 'ILSVRC2012_val_00000462.JPEG': 'https://live.staticflickr.com/65535/53770020312_35b62cb2cc_o_d.jpg', 'ILSVRC2012_val_00012055.JPEG': 'https://live.staticflickr.com/65535/53771260819_12ca78b60d_o_d.jpg', 'ILSVRC2012_val_00011751.JPEG': 'https://live.staticflickr.com/65535/53770020317_5b9dcf990c_o_d.jpg', 'ILSVRC2012_val_00011728.JPEG': 'https://live.staticflickr.com/65535/53771351540_eb9e867ac2_o_d.jpg', 'ILSVRC2012_val_00007137.JPEG': 'https://live.staticflickr.com/65535/53771137308_8c52470772_o_d.jpg', 'ILSVRC2012_val_00006271.JPEG': 'https://live.staticflickr.com/65535/53770020327_c08a21362e_o_d.jpg', 'ILSVRC2012_val_00005639.JPEG': 'https://live.staticflickr.com/65535/53770020322_6341b4ebd2_o_d.jpg', 'ILSVRC2012_val_00004748.JPEG': 'https://live.staticflickr.com/65535/53771260864_5579e93059_o_d.jpg', 'ILSVRC2012_val_00002988.JPEG': 'https://live.staticflickr.com/65535/53771260869_c8b372e9b2_o_d.jpg', 'ILSVRC2012_val_00002701.JPEG': 'https://live.staticflickr.com/65535/53771260884_25c8a28103_o_d.jpg', 'ILSVRC2012_val_00001651.JPEG': 'https://live.staticflickr.com/65535/53770020367_acc247c8f9_o_d.jpg', 'ILSVRC2012_val_00001280.JPEG': 'https://live.staticflickr.com/65535/53770931891_f1ac416368_o_d.jpg', 'ILSVRC2012_val_00000552.JPEG': 'https://live.staticflickr.com/65535/53770931896_b889d5fc00_o_d.jpg', 'ILSVRC2012_val_00009267.JPEG': 'https://live.staticflickr.com/65535/53770931886_0ff7464703_o_d.jpg', 'ILSVRC2012_val_00004978.JPEG': 'https://live.staticflickr.com/65535/53771260719_e767237b3c_o_d.jpg', 'ILSVRC2012_val_00004840.JPEG': 'https://live.staticflickr.com/65535/53770931901_cbf6b4b379_o_d.jpg', 'ILSVRC2012_val_00003402.JPEG': 'https://live.staticflickr.com/65535/53771137228_d29126eefd_o_d.jpg', 'ILSVRC2012_val_00002815.JPEG': 'https://live.staticflickr.com/65535/53771351445_de11ab7cce_o_d.jpg', 'ILSVRC2012_val_00002669.JPEG': 'https://live.staticflickr.com/65535/53771137233_3e5fa77947_o_d.jpg', 'ILSVRC2012_val_00001705.JPEG': 'https://live.staticflickr.com/65535/53770931951_b0719ab7f5_o_d.jpg', '3_2830_5356853541_6300bc90bd_c.jpg': 'https://live.staticflickr.com/65535/53771351300_9e964af9cd_o_d.jpg', '06692.jpg': 'https://live.staticflickr.com/65535/53771137118_827846d369_o_d.jpg', '06636.jpg': 'https://live.staticflickr.com/65535/53771137103_0e45e6d1d1_o_d.jpg', '27_1504_6007075536_3750a30773_c.jpg': 'https://live.staticflickr.com/65535/53771260629_966b44e0ef_o_d.jpg', '26_1071_522549861_97f03a739f_c.jpg': 'https://live.staticflickr.com/65535/53771260639_1feedc8a3c_o_d.jpg', '23_1636_534740799_abff74d94f_c.jpg': 'https://live.staticflickr.com/65535/53771351320_d0f4a465d1_o_d.jpg', '21_2217_4030096682_e73d0c7f30_c.jpg': 'https://live.staticflickr.com/65535/53770020147_a5510422a4_o_d.jpg', '21_1466_1371241387_5e6f703cbe_c.jpg': 'https://live.staticflickr.com/65535/53770931756_b84aa97ded_o_d.jpg', '20_2056_4618943767_38622a66f5_c.jpg': 'https://live.staticflickr.com/65535/53770931781_6be2abcb95_o_d.jpg', '16_2766_9232675746_ac49cd269d_c.jpg': 'https://live.staticflickr.com/65535/53771137168_06a75b5c1a_o_d.jpg', '6_2019_304027208_444e9629a2_c.jpg': 'https://live.staticflickr.com/65535/53771260679_dc387965fa_o_d.jpg', '71Dg-qwFlzL._AC_UF894,1000_QL80_.jpg': 'https://live.staticflickr.com/65535/53770931596_b091731730_o_d.jpg', 'Purple_Finch-Linda_Peresen-BS-FI-480x359.jpg': 'https://live.staticflickr.com/65535/53771260494_c429752413_o_d.jpg', 'Indian_Peafowl.jpg': 'https://live.staticflickr.com/65535/53771260519_931626d3b4_o_d.jpg', 'ILSVRC2012_val_00014328.JPEG': 'https://live.staticflickr.com/65535/53771351175_8d7929fe47_o_d.jpg', 'ILSVRC2012_val_00009092.JPEG': 'https://live.staticflickr.com/65535/53770020022_e44687d8c8_o_d.jpg', 'ILSVRC2012_val_00005848.JPEG': 'https://live.staticflickr.com/65535/53771351190_b32d9dc1f5_o_d.jpg', 'ILSVRC2012_val_00005535.JPEG': 'https://live.staticflickr.com/65535/53771351205_f69009703f_o_d.jpg', 'ILSVRC2012_val_00003279.JPEG': 'https://live.staticflickr.com/65535/53770020042_517d0385c4_o_d.jpg', 'ILSVRC2012_val_00002929.JPEG': 'https://live.staticflickr.com/65535/53771260554_2dd47aa05e_o_d.jpg', 'ILSVRC2012_val_00002668.JPEG': 'https://live.staticflickr.com/65535/53771351235_b0f0190f1a_o_d.jpg', 'ILSVRC2012_val_00001915.JPEG': 'https://live.staticflickr.com/65535/53771260564_6b41b43c3e_o_d.jpg', 'ILSVRC2012_val_00000439.JPEG': 'https://live.staticflickr.com/65535/53770931656_c4bf33a6a2_o_d.jpg', 'chick-8116385_1280.jpg': 'https://live.staticflickr.com/65535/53771351245_79b09f75f8_o_d.jpg', 'aussie-bird-count-background-image.jpg.auspostimage.970_0.medium.jpg': 'https://live.staticflickr.com/65535/53771260579_b1338a7583_o_d.jpg', '5690.jpg_wh300.jpg': 'https://live.staticflickr.com/65535/53770931681_8bdbc1d0cb_o_d.jpg', '960x0.jpg': 'https://live.staticflickr.com/65535/53770931686_386eb4cece_o_d.jpg', '000095642.jpg': 'https://live.staticflickr.com/65535/53771136863_7c8fd90f89_o_d.jpg', '10_659_6301763026_67f1036fa9_c.jpg': 'https://live.staticflickr.com/65535/53771136853_519c58602b_o_d.jpg', 'ILSVRC2012_val_00048494.JPEG': 'https://live.staticflickr.com/65535/53771136858_a860924666_o_d.jpg', 'ILSVRC2012_val_00043513.JPEG': 'https://live.staticflickr.com/65535/53771136873_cecd19df85_o_d.jpg', 'ILSVRC2012_val_00034742.JPEG': 'https://live.staticflickr.com/65535/53771136888_92ff178ba6_o_d.jpg', 'ILSVRC2012_val_00026564.JPEG': 'https://live.staticflickr.com/65535/53771136893_68b70b04be_o_d.jpg', 'ILSVRC2012_val_00022297.JPEG': 'https://live.staticflickr.com/65535/53771351065_c46dbdd708_o_d.jpg', 'ILSVRC2012_val_00017250.JPEG': 'https://live.staticflickr.com/65535/53770019902_31bd34238d_o_d.jpg', 'ILSVRC2012_val_00016010.JPEG': 'https://live.staticflickr.com/65535/53771351075_ccccf39ed2_o_d.jpg', 'ILSVRC2012_val_00002174.JPEG': 'https://live.staticflickr.com/65535/53770019922_fd321a748e_o_d.jpg', '21_334_3172067597_eb0cca5f59_c.jpg': 'https://live.staticflickr.com/65535/53770019722_b7e41ca0be_o_d.jpg', '19_498_9551900266_7694d5a921_c.jpg': 'https://live.staticflickr.com/65535/53770019687_da26483ef0_o_d.jpg', '10_208_5349690084_77447dc909_c.jpg': 'https://live.staticflickr.com/65535/53770019712_f3fa624a40_o_d.jpg', '7ba16d4343e8420ba0828b510fe9b1fc.jpg': 'https://live.staticflickr.com/65535/53770019692_509963f768_o_d.jpg', '5bc965fba310eff36901a88f.jpg': 'https://live.staticflickr.com/65535/53770019697_a2258df1ca_o_d.jpg', '3_498_8595235915_f5015049de_c.jpg': 'https://live.staticflickr.com/65535/53771260274_1db03c073a_o_d.jpg', '3_220_43884793680_a9baf6caa7_c.jpg': 'https://live.staticflickr.com/65535/53770931371_02f11988c9_o_d.jpg', '3_113_5760123181_2fd356ceaa_c.jpg': 'https://live.staticflickr.com/65535/53770019757_2324740c00_o_d.jpg', '2ab2903b15c2451680a95402aa58b93b.jpg': 'https://live.staticflickr.com/65535/53771350890_3f741e84b0_o_d.jpg', 'unnamed.png': 'https://live.staticflickr.com/65535/53770019782_7d2c1e2969_o_d.png', 'tyrannosaur.jpg': 'https://live.staticflickr.com/65535/53770019777_b5b36c52ab_o_d.jpg', 'tiger.jpg': 'https://live.staticflickr.com/65535/53770931396_62535121fb_o_d.jpg', 'panda.jpg': 'https://live.staticflickr.com/65535/53770931406_ddbcd82ed2_o_d.jpg', 'd2e1db6b963fe494.jpg': 'https://live.staticflickr.com/65535/53771260379_90116453c4_o_d.jpg', 'c0522c9eb0834fafa2a9f0fe39d27db1.jpg': 'https://live.staticflickr.com/65535/53771136788_f429195380_o_d.jpg', '2019030834861153.jpg': 'https://live.staticflickr.com/65535/53771350965_b1e1f189c3_o_d.jpg', '2104-29f41083-f134-62e2-ecbc-710947cd94be.png': 'https://live.staticflickr.com/65535/53770931451_e2914a817a_o_d.png', '27_232_49009045008_4d8b924672_c.jpg': 'https://live.staticflickr.com/65535/53771350980_d0689a0452_o_d.jpg', '22_680_33987634432_9d27fef794_c.jpg': 'https://live.staticflickr.com/65535/53771350985_5f18fb8c63_o_d.jpg', '22_133_26405848950_44c6e31373_c.jpg': 'https://live.staticflickr.com/65535/53770931446_d764abcb8d_o_d.jpg', '000148987.jpg': 'https://live.staticflickr.com/65535/53771260129_b2de174a4e_o_d.jpg', '000129436.jpg': 'https://live.staticflickr.com/65535/53771350740_fff27fe0e2_o_d.jpg', '000102722.jpg': 'https://live.staticflickr.com/65535/53771136508_493d96e207_o_d.jpg', '64300b8ae4b020d074b648931.jpg': 'https://live.staticflickr.com/65535/53771350755_a806954558_o_d.jpg', '000039849.jpg': 'https://live.staticflickr.com/65535/53770019537_d710424bd6_o_d.jpg', '6597dbfbe4b00c772112517c_m.png': 'https://live.staticflickr.com/65535/53770931236_2ef792d238_o_d.png', '40E7FC87F074701A98053D733DAE15AE3B11F5E7_size64_w1440_h810.jpg': 'https://live.staticflickr.com/65535/53770019577_45d817e754_o_d.jpg', '13_1162_14101489713_8df6f1cb1d_c.jpg': 'https://live.staticflickr.com/65535/53770931276_b55d98b2ba_o_d.jpg', '3_1992_3999964691_469855da43_c.jpg': 'https://live.staticflickr.com/65535/53771136583_4df9244b9b_o_d.jpg', '2-200106221949244.jpg': 'https://live.staticflickr.com/65535/53770931281_7fc2729957_o_d.jpg', 'merlin_200978808_96ee2749-3341-450d-baa9-00efb3347518-master1050.jpg': 'https://live.staticflickr.com/65535/53770019622_1fc393e9ce_o_d.jpg', 'Lockheed_Martin_F-22A_Raptor_JSOH.jpg': 'https://live.staticflickr.com/65535/53771260194_20e1e24282_o_d.jpg', 'A45E60D71B867B9B2101F601C7C7ECBA56EA0BAE_size56_w600_h388.jpg': 'https://live.staticflickr.com/65535/53770931286_cd800733a1_o_d.jpg', '20210310002013.jpg': 'https://live.staticflickr.com/65535/53771136608_c3a128e0f3_o_d.jpg', '45077563364.jpg': 'https://live.staticflickr.com/65535/53770931321_cacf538e45_o_d.jpg', '536736457.jpg': 'https://live.staticflickr.com/65535/53771136698_f0a1548559_o_d.jpg', '0695327.jpg': 'https://live.staticflickr.com/65535/53770019657_f61ffa1e67_o_d.jpg', '000166427.jpg': 'https://live.staticflickr.com/65535/53771136658_38747dda74_o_d.jpg', 'Bk1Ghbs08FrAn20C0u5Z_6.jpg': 'https://live.staticflickr.com/65535/53762535087_3035c2688f_o_d.jpg', 'Bk1Ghbs08FrAn20C0u5Z_1.jpg': 'https://live.staticflickr.com/65535/53763855515_9279d03a26_o_d.jpg', 'Bk1Ghaw1SzYApPBTMhyh_2.jpg': 'https://live.staticflickr.com/65535/53762535107_2452f982d5_o_d.jpg', 'Bk1Ghaw1SzYApPBTMhyh_1.jpg': 'https://live.staticflickr.com/65535/53763769129_dcd418f0c0_o_d.jpg', 'Bk1GhaE1RiIATWq50dSy_1.jpg': 'https://live.staticflickr.com/65535/53763855545_242a76e568_o_d.jpg', 'Bk1Gha81SzYApOoIxp5B_2.jpg': 'https://live.staticflickr.com/65535/53763636363_4073bbe992_o_d.jpg', 'Bk1Gha81RPzAPkBUc3u3_1.jpg': 'https://live.staticflickr.com/65535/53763435791_e99f2e6986_o_d.jpg', 'Bk1Gh281RgfATZK_8dRG_236.jpg': 'https://live.staticflickr.com/65535/53763636413_e36e045dc7_o_d.jpg', 'Bk1Gh2A1SUzAHVjnPntj_4.jpg': 'https://live.staticflickr.com/65535/53763636458_87b73467c5_o_d.jpg', 'Bk1Gh1w1RhiDq9sootpU_1.jpg': 'https://live.staticflickr.com/65535/53763435851_119baa8d0a_o_d.jpg', 'Bk1Gg5I1RQ3DJ-AkJUso_1.jpg': 'https://live.staticflickr.com/65535/53763435856_4828de9570_o_d.jpg', 'Bk7v--zxK0zil9irzcyV_1.jpg': 'https://live.staticflickr.com/65535/53763855595_5a79fdb9a8_o_d.jpg', 'Bk7v-yXxK0zil8279f11_1.jpg': 'https://live.staticflickr.com/65535/53762535157_0e28156f87_o_d.jpg', 'Bk7v-yXxK0zil8279f2M_1.jpg': 'https://live.staticflickr.com/65535/53762535152_87da1f20b7_o_d.jpg', 'Bk7v-yLxK0zil8279f1u_1.jpg': 'https://live.staticflickr.com/65535/53763435901_659f3a1254_o_d.jpg', 'Bk7v-ybxK0zil8279f2S_1.jpg': 'https://live.staticflickr.com/65535/53763435881_3b564e2d30_o_d.jpg', 'Bk7v-ybxK0zil8279f2l_1.jpg': 'https://live.staticflickr.com/65535/53763636493_30232eb97e_o_d.jpg', 'Bk7v--XxK0zil8fC1c8E_1.jpg': 'https://live.staticflickr.com/65535/53763636533_9471a03332_o_d.jpg', 'Bk7v-x7xK0zil8279f0q_1.jpg': 'https://live.staticflickr.com/65535/53763855625_74064bc38d_o_d.jpg', 'Bk7v-x_xK0zil8279f1K_1.jpg': 'https://live.staticflickr.com/65535/53763636538_573d345869_o_d.jpg', 'Bk7v-x_xK0zil8279f1D_1.jpg': 'https://live.staticflickr.com/65535/53763855620_217e593e86_o_d.jpg', 'Bk7v-wzxK0zil8279fw2_1.jpg': 'https://live.staticflickr.com/65535/53763769229_2d8e3e0427_o_d.jpg', 'Bk7v-vjxK0zil9Np5RsY_1.jpg': 'https://live.staticflickr.com/65535/53763636578_b2bf71cee4_o_d.jpg', 'Bk7v-uTxK0zil_ULabZq_1.jpg': 'https://live.staticflickr.com/65535/53762535212_8f074ce3eb_o_d.jpg', 'Bk7v-uDxK0zil_ULabY-_1.jpg': 'https://live.staticflickr.com/65535/53763769234_d8fec819b5_o_d.jpg', 'Bk7v-tzxK0zil_ULabYA_1.jpg': 'https://live.staticflickr.com/65535/53763636568_aba7c3a953_o_d.jpg', 'Bk7v-tjxK0zil-c78DGn_1.jpg': 'https://live.staticflickr.com/65535/53763636573_fe5ae87b5a_o_d.jpg', 'Bk7v-tfxK0zil-c78DGY_1.jpg': 'https://live.staticflickr.com/65535/53762535232_28a1bcefff_o_d.jpg', 'Bk7v-t3xK0zil9Np5RmP_1.jpg': 'https://live.staticflickr.com/65535/53763636598_21c90cea65_o_d.jpg', 'Bk7v-snxK0zil-c78DDP_1.jpg': 'https://live.staticflickr.com/65535/53763855695_b53d977d94_o_d.jpg', 'Bk7v-snxK0zil-c78DDD_1.jpg': 'https://live.staticflickr.com/65535/53762535267_a008319a45_o_d.jpg', 'Bk7v-snxK0zil-c78DC__1.jpg': 'https://live.staticflickr.com/65535/53763855705_aa3de08139_o_d.jpg', 'Bk7v-s3xK0zil-c78DEL_1.jpg': 'https://live.staticflickr.com/65535/53763435946_256aeb0961_o_d.jpg', 'Bk7v-r7xK0zil_ULabR7_1.jpg': 'https://live.staticflickr.com/65535/53763435951_6e1e434937_o_d.jpg', 'Bk7v--jxK0zil8fC1c9A_1.jpg': 'https://live.staticflickr.com/65535/53763435961_c93cddc5fe_o_d.jpg', 'Bk7v--HxK0zil9irzcv8_1.jpg': 'https://live.staticflickr.com/65535/53762535302_1653b70697_o_d.jpg', 'Bk7v-97xK0zil9irzcv0_1.jpg': 'https://live.staticflickr.com/65535/53763769279_88a22f8f16_o_d.jpg', 'Bk7v-83xK0zil9irzcsP_1.jpg': 'https://live.staticflickr.com/65535/53763636623_558b971270_o_d.jpg', 'Bk7v-77xK0zil9irzco4_1.jpg': 'https://live.staticflickr.com/65535/53763435976_7080c01e8f_o_d.jpg', 'Bk7v-77xK0zil8fC1czH_1.jpg': 'https://live.staticflickr.com/65535/53763855720_36421fa126_o_d.jpg', 'Bk7v-63xK0zil8fC1cvr_1.jpg': 'https://live.staticflickr.com/65535/53763855745_c57bbc5f44_o_d.jpg', 'Bk7v-9vxK0zil8fC1c6H_1.jpg': 'https://live.staticflickr.com/65535/53763769299_38780a0ec5_o_d.jpg', 'Bk7v-9TxK0zil8fC1c4V_1.jpg': 'https://live.staticflickr.com/65535/53762535332_f8a2e07918_o_d.jpg', 'Bk7v-9TxK0zil8fC1c4r_1.jpg': 'https://live.staticflickr.com/65535/53762535337_de1af158ff_o_d.jpg', 'Bk7v-9rxK0zil9irzcvB_1.jpg': 'https://live.staticflickr.com/65535/53763636643_5bb6db2a44_o_d.jpg', 'Bk7v-9HxK0zil8fC1c33_1.jpg': 'https://live.staticflickr.com/65535/53763636653_f8a2e07918_o_d.jpg', 'Bk7v-8XxK0zil9irzcqa_1.jpg': 'https://live.staticflickr.com/65535/53763436001_184a871632_o_d.jpg', 'Bk7v-8PxK0zil8fC1c0k_1.jpg': 'https://live.staticflickr.com/65535/53763636658_4b49694c44_o_d.jpg', 'Bk7v-8nxK0zil9irzcrX_1.jpg': 'https://live.staticflickr.com/65535/53763636663_eb448a690d_o_d.jpg', 'Bk7v-8fxK0zil8fC1c1f_1.jpg': 'https://live.staticflickr.com/65535/53763636668_a3dfce519e_o_d.jpg', 'Bk7v-8_xK0zil8fC1c3a_1.jpg': 'https://live.staticflickr.com/65535/53763855785_d2b254fbd9_o_d.jpg', 'Bk7v-7zxK0zil9irzcoe_1.jpg': 'https://live.staticflickr.com/65535/53763769349_a243895064_o_d.jpg', 'Bk7v--7xK0zil8fC1c-M_1.jpg': 'https://live.staticflickr.com/65535/53763855795_755aa57235_o_d.jpg', 'Bk7v-7LxK0zil8fC1cw9_1.jpg': 'https://live.staticflickr.com/65535/53763769364_5fd7dc6851_o_d.jpg', 'Bk7v-7jxK0zil8fC1cyC_1.jpg': 'https://live.staticflickr.com/65535/53763436031_02b2135d6f_o_d.jpg', 'Bk7v-7HxK0zil8fC1cwc_1.jpg': 'https://live.staticflickr.com/65535/53763636698_0837ef4a6b_o_d.jpg', 'Bk7v-7HxK0zil8fC1cwa_1.jpg': 'https://live.staticflickr.com/65535/53763769384_2a2b9ea2a7_o_d.jpg', 'Bk7v-7fxK0zil9irzcmu_1.jpg': 'https://live.staticflickr.com/65535/53763855845_8c1be6cd78_o_d.jpg', 'Bk7v-7fxK0zil8fC1cx4_1.jpg': 'https://live.staticflickr.com/65535/53762535382_4468139809_o_d.jpg', 'Bk7v-6nxK0zil8fC1cvC_1.jpg': 'https://live.staticflickr.com/65535/53763769409_694f1282ac_o_d.jpg', 'Bk7v-6HxK0zil8fC1ctV_1.jpg': 'https://live.staticflickr.com/65535/53763769419_d798b16f18_o_d.jpg', 'Bk7v-6DxK0zil8fC1ctQ_1.jpg': 'https://live.staticflickr.com/65535/53763855860_26fe5fe7b0_o_d.jpg', 'Bk7v-5_xK0zil8279gRW_1.jpg': 'https://live.staticflickr.com/65535/53763636723_95795792dc_o_d.jpg', 'Bk7v-4vxK0zil8279gM4_1.jpg': 'https://live.staticflickr.com/65535/53762535417_3cbc35c345_o_d.jpg', 'Bk7v-3bxK0zil-c78DrE_1.jpg': 'https://live.staticflickr.com/65535/53763436066_127277abe8_o_d.jpg', 'Bk7v-3bxK0zil-c78DrB_1.jpg': 'https://live.staticflickr.com/65535/53763855885_35068c64e1_o_d.jpg', 'Bk7v_KDxK0zil-o8khi8_1.jpg': 'https://live.staticflickr.com/65535/53763436086_2343f735c4_o_d.jpg', 'Bk7v_IzxK0zil-o8kheK_1.jpg': 'https://live.staticflickr.com/65535/53763855900_a9d84cdaee_o_d.jpg', 'Bk7v_IXxK0zil-o8khcV_1.jpg': 'https://live.staticflickr.com/65535/53763436096_d7796f9d0d_o_d.jpg', 'Bk7v_ITxK0zil-o8khcB_1.jpg': 'https://live.staticflickr.com/65535/53763855915_227163575e_o_d.jpg', 'Bk7v_IrxK0zil-o8khdg_1.jpg': 'https://live.staticflickr.com/65535/53762535452_350e609189_o_d.jpg', 'Bk7v_IDxK0zil-o8khbW_1.jpg': 'https://live.staticflickr.com/65535/53763436106_572928f0ba_o_d.jpg', 'Bk7v_IDxK0zil-o8khbn_1.jpg': 'https://live.staticflickr.com/65535/53763636763_a5ecb725e7_o_d.jpg', 'Bk7v_I_xK0zil-o8khew_1.jpg': 'https://live.staticflickr.com/65535/53763855930_fbc90b1ed7_o_d.jpg', 'Bk7v_HvxK0zil-o8khaG_1.jpg': 'https://live.staticflickr.com/65535/53763855955_0f7b8c9df7_o_d.jpg', 'Bk7v_HvxK0zil8fC1dcR_1.jpg': 'https://live.staticflickr.com/65535/53762535472_14c45ba5ca_o_d.jpg', 'Bk7v_HnxK0zil-o8khZc_1.jpg': 'https://live.staticflickr.com/65535/53763855950_e8411dd1b6_o_d.jpg', 'Bk7v_HjxK0zil-o8khZM_1.jpg': 'https://live.staticflickr.com/65535/53763436116_bacab4aeb8_o_d.jpg', 'Bk7v_H_xK0zil-o8khbP_1.jpg': 'https://live.staticflickr.com/65535/53763636778_6efe361382_o_d.jpg', 'Bk7v_H_xK0zil-o8khbA_1.jpg': 'https://live.staticflickr.com/65535/53763636798_006553daba_o_d.jpg', 'Bk7v_GvxK0zil-o8khWQ_1.jpg': 'https://live.staticflickr.com/65535/53763436146_6b51602fde_o_d.jpg', 'Bk7v_GLxK0zil_ULacnD_1.jpg': 'https://live.staticflickr.com/65535/53763436151_7ff04de697_o_d.jpg', 'Bk7v_GHxK0zil-o8khTt_1.jpg': 'https://live.staticflickr.com/65535/53763636818_cf2a4853c6_o_d.jpg', 'Bk7v_G3xK0zil-o8khWl_1.jpg': 'https://live.staticflickr.com/65535/53763855975_8a7bcdce6d_o_d.jpg', 'Bk7v_G_xK0zil8fC1dZT_1.jpg': 'https://live.staticflickr.com/65535/53762535497_7c1c11f62a_o_d.jpg', 'Bk7v_FrxK0zil-c78Eb6_1.jpg': 'https://live.staticflickr.com/65535/53762535502_908f4aa50c_o_d.jpg', 'Bk7v_FfxK0zil8fC1dUO_1.jpg': 'https://live.staticflickr.com/65535/53762535527_7d33e24e83_o_d.jpg', 'Bk7v_F3xK0zil-o8khSm_1.jpg': 'https://live.staticflickr.com/65535/53763855990_9388febccd_o_d.jpg', 'Bk7v_F3xK0zil-o8khSl_1.jpg': 'https://live.staticflickr.com/65535/53763856005_8ef5270d1e_o_d.jpg', 'Bk7v_EzxK0zil-c78EYM_1.jpg': 'https://live.staticflickr.com/65535/53763436191_8da329db22_o_d.jpg', 'Bk7v_EXxK0zil-c78EWt_1.jpg': 'https://live.staticflickr.com/65535/53763856015_80307d1d17_o_d.jpg', 'Bk7v_EXxK0zil-c78EWp_1.jpg': 'https://live.staticflickr.com/65535/53763856025_27a2fb2488_o_d.jpg', 'Bk7v_EvxK0zil-c78EXw_1.jpg': 'https://live.staticflickr.com/65535/53763636833_f36d398222_o_d.jpg', 'Bk7v_EjxK0zil-c78EXV_1.jpg': 'https://live.staticflickr.com/65535/53763436211_f76aa96d9e_o_d.jpg', 'Bk7v_EjxK0zil_ULachQ_1.jpg': 'https://live.staticflickr.com/65535/53763769529_164405d6b2_o_d.jpg', 'Bk7v_EHxK0zil8fC1dOw_1.jpg': 'https://live.staticflickr.com/65535/53763636848_ec3980a9d7_o_d.jpg', 'Bk7v_EHxK0zil8fC1dOu_1.jpg': 'https://live.staticflickr.com/65535/53762535552_b62d58455b_o_d.jpg', 'Bk7v_EfxK0zil-c78EW0_1.jpg': 'https://live.staticflickr.com/65535/53762535557_7b54880625_o_d.jpg', 'Bk7v_E7xK0zil-o8khOg_1.jpg': 'https://live.staticflickr.com/65535/53763856050_ba79bda0b8_o_d.jpg', 'Bk7v_E3xK0zil-o8khOT_1.jpg': 'https://live.staticflickr.com/65535/53762535562_c97eb8b6ff_o_d.jpg', 'Bk7v_DvxK0zil-c78ET5_1.jpg': 'https://live.staticflickr.com/65535/53763436221_0ac08b70b2_o_d.jpg', 'Bk7v_DnxK0zil_ULacdn_1.jpg': 'https://live.staticflickr.com/65535/53763636888_c8158d2f87_o_d.jpg', 'Bk7v_D7xK0zil-c78EU5_1.jpg': 'https://live.staticflickr.com/65535/53763436231_8eb3d10ed5_o_d.jpg', 'Bk7v_D3xK0zil-c78EUa_1.jpg': 'https://live.staticflickr.com/65535/53762535587_0afa709d28_o_d.jpg', 'Bk7v_D3xK0zil_ULacex_1.jpg': 'https://live.staticflickr.com/65535/53763856090_84426a58bc_o_d.jpg', 'Bk7v_BXxK0zil9Np5Snc_1.jpg': 'https://live.staticflickr.com/65535/53762535597_f913a173c8_o_d.jpg', 'Bk7v_BPxK0zil9Np5SnC_1.jpg': 'https://live.staticflickr.com/65535/53763856100_4e7ab24644_o_d.jpg', 'Bk7v_AXxK0zil9Np5SkX_1.jpg': 'https://live.staticflickr.com/65535/53763769629_4160e31913_o_d.jpg', 'Bk7v_AXxK0zil9Np5SkO_1.jpg': 'https://live.staticflickr.com/65535/53763436251_c1ab8c972e_o_d.jpg', 'Bk7v_ArxK0zil9Np5SlM_1.jpg': 'https://live.staticflickr.com/65535/53763856120_4a490c5b75_o_d.jpg', 'Bk7v_ArxK0zil9Np5Slb_1.jpg': 'https://live.staticflickr.com/65535/53762535622_4c025d8b37_o_d.jpg', 'Bk7v_AfxK0zil9Np5Skr_1.jpg': 'https://live.staticflickr.com/65535/53763769644_5e81f97542_o_d.jpg', 'Bk1GpU81SzoCmyHOqCt6_1.jpg': 'https://live.staticflickr.com/65535/53763436266_ec58fd1ca4_o_d.jpg', 'Bk1GphE1Sj3Da17DRleV_1.jpg': 'https://live.staticflickr.com/65535/53763436271_4ffceffa13_o_d.jpg', 'Bk1Go6o1RhyCQ8rBMnNK_1.jpg': 'https://live.staticflickr.com/65535/53763769674_390d970e35_o_d.jpg', 'Bk1GlXU1STjBGkvwYqJh_1.jpg': 'https://live.staticflickr.com/65535/53763636938_b27824141f_o_d.jpg', 'Bk1GlUM08l3DtZB-gqJm_1.jpg': 'https://live.staticflickr.com/65535/53762535627_2909c088c6_o_d.jpg', 'Bk1GlR41RQmBgvSoTkqD_1.jpg': 'https://live.staticflickr.com/65535/53763436296_853d7af1d6_o_d.jpg', 'Bk1GlPY1RQkDWio4bwup_2.jpg': 'https://live.staticflickr.com/65535/53763636953_cfeb758c33_o_d.jpg', 'Bk1GlP01Sz3BAr8N64_9_1.jpg': 'https://live.staticflickr.com/65535/53763436326_e1dd49089e_o_d.jpg', 'Bk1GlOc1RhjDrwGLhA0e_1.jpg': 'https://live.staticflickr.com/65535/53763436321_84c713a429_o_d.jpg', 'Bk1GlKE1RSCCPj0tnZdn_1.jpg': 'https://live.staticflickr.com/65535/53762535662_84228c8120_o_d.jpg', 'Bk1GlE81Sz8B1w4KOCaU_1.jpg': 'https://live.staticflickr.com/65535/53762535667_0d7a271269_o_d.jpg', 'Bk1Glcw08EeC1FlrM3VD_1.jpg': 'https://live.staticflickr.com/65535/53763436341_b6a71ccd89_o_d.jpg', 'Bk1GlcE1RQmBgvSoTlzt_5.jpg': 'https://live.staticflickr.com/65535/53762535687_c34c446264_o_d.jpg', 'Bk1GlC81RR_CkAemrPkc_1.jpg': 'https://live.staticflickr.com/65535/53762535677_101d0f0016_o_d.jpg', 'Bk1GlbQ1RQmBgvSoTlto_6.jpg': 'https://live.staticflickr.com/65535/53763436356_d3979a803f_o_d.jpg', 'Bk1Gkz41S0JD0Zp0Mvqd_1.jpg': 'https://live.staticflickr.com/65535/53763636983_89c6cc8479_o_d.jpg', 'Bk1GkxU1S0JD0Zp0MvdW_2.jpg': 'https://live.staticflickr.com/65535/53762535692_3baa77f35c_o_d.jpg', 'Bk1GktA1RiHDqlBOH_7t_2.jpg': 'https://live.staticflickr.com/65535/53763856190_299f9363b4_o_d.jpg', 'Bk1GkjQ1STmDWZ0NRKQq_3.jpg': 'https://live.staticflickr.com/65535/53762535702_20e56c66c6_o_d.jpg', 'Bk1Gkfs1RQ9BgWen6jDW_1.jpg': 'https://live.staticflickr.com/65535/53763637008_7d607eded3_o_d.jpg', 'Bk1Gk8s1RhjDrvHt8RuE_1.jpg': 'https://live.staticflickr.com/65535/53763769769_21bb358552_o_d.jpg', 'Bk1Gk7Y1RSCCPjGlKRLQ_1.jpg': 'https://live.staticflickr.com/65535/53763637053_5fc26fb77c_o_d.jpg', 'Bk1Gk5c1SkVAwfC1NRE3_2.jpg': 'https://live.staticflickr.com/65535/53763769774_7b2fa15e93_o_d.jpg', 'Bk1Gk4U1Sj8CfwULYr3b_1.jpg': 'https://live.staticflickr.com/65535/53763637058_ea4f4f7d52_o_d.jpg', 'Bk1Gk3M08FrAn6aSK14I_8.jpg': 'https://live.staticflickr.com/65535/53763436406_fb35b39224_o_d.jpg', 'Bk1Gk2w1SCSBf1A6TxFM_1.jpg': 'https://live.staticflickr.com/65535/53763436411_b3a18c650a_o_d.jpg', 'Bk1Gk2I1RxKChRaS1Ofe_8.jpg': 'https://live.staticflickr.com/65535/53763436421_10248f2828_o_d.jpg', 'Bk1Gk2I1RxKChRaS1Ofe_6.jpg': 'https://live.staticflickr.com/65535/53763637083_13dceddaae_o_d.jpg', 'Bk1Gj601RQkDWiw9D9Za_1.jpg': 'https://live.staticflickr.com/65535/53763856230_8d52031e94_o_d.jpg', 'Bk1GiwE07jVCV3bfPbXs_2.jpg': 'https://live.staticflickr.com/65535/53763436441_68f9a057de_o_d.jpg', 'Bk1Ging1SR6A-S7O7i4d_1.jpg': 'https://live.staticflickr.com/65535/53763856240_6506578fbb_o_d.jpg', 'Bk1Gijo1RRUAl8FIegGX_1.jpg': 'https://live.staticflickr.com/65535/53763436446_1542002486_o_d.jpg', 'Bk1GhZY1SkhAHUeFF-r4_1.jpg': 'https://live.staticflickr.com/65535/53762535742_dfa54e0f50_o_d.jpg', 'Bk1GhZw1SR3DuP-e4lTf_1.jpg': 'https://live.staticflickr.com/65535/53763637103_631d156910_o_d.jpg', 'Bk1GhZk1S2EChITlYfCG_1.jpg': 'https://live.staticflickr.com/65535/53763436456_7f2bddb511_o_d.jpg', 'Bk1GhZk1S0ZBIz_vZuKQ_1.jpg': 'https://live.staticflickr.com/65535/53762535777_bd98ac4dba_o_d.jpg', 'Bk1GhZA08VWC2b30RI0P_1.jpg': 'https://live.staticflickr.com/65535/53762535767_a493880696_o_d.jpg', 'Bk1GhZA1RPwAjU3dTKNa_1.jpg': 'https://live.staticflickr.com/65535/53763856270_886657faf0_o_d.jpg', 'Bk1GhYY1S0ZBIx0O95ii_1.jpg': 'https://live.staticflickr.com/65535/53763856280_ee582756b7_o_d.jpg', 'Bk1GhYw1SknB0VhSEQo7_6.jpg': 'https://live.staticflickr.com/65535/53763856275_2732f1f68e_o_d.jpg', 'Bk1GhYw1SknB0VhSEQo7_3.jpg': 'https://live.staticflickr.com/65535/53763637123_e006afee24_o_d.jpg', 'Bk1GhYE1SR6A2Q0i0Pse_1.jpg': 'https://live.staticflickr.com/65535/53762535812_a41da0246f_o_d.jpg', 'Bk1GhY81RxKChLq__dhB_1.jpg': 'https://live.staticflickr.com/65535/53763436496_9cf43308c0_o_d.jpg', 'Bk1GhY81RQmBgrffErXD_1.jpg': 'https://live.staticflickr.com/65535/53763856315_e3d39981fb_o_d.jpg', 'Bk1GhY01Sk9BqhCwKhe4_1.jpg': 'https://live.staticflickr.com/65535/53763856330_e1a74ec18c_o_d.jpg', 'Bk1GhxQ1RQ3DJ0VpO1mh_23.jpg': 'https://live.staticflickr.com/65535/53763856335_16e9140a8d_o_d.jpg', 'Bk1GhxQ1RQ3DJ0VpO1mh_22.jpg': 'https://live.staticflickr.com/65535/53763436506_59c4a8f533_o_d.jpg', 'Bk1GhxQ1RQ3DJ0VpO1mh_19.jpg': 'https://live.staticflickr.com/65535/53763436511_49f9970d9f_o_d.jpg', 'Bk1GhxQ1RQ3DJ0VpO1mh_6.jpg': 'https://live.staticflickr.com/65535/53763637148_b05b82cf86_o_d.jpg', 'Bk1GhXM1RRUAdh3q01P7_1.jpg': 'https://live.staticflickr.com/65535/53762535847_f0ec7441be_o_d.jpg', 'Bk1GhXI1RhCCl-ouADeS_1.jpg': 'https://live.staticflickr.com/65535/53763769869_bfbe4ce6e1_o_d.jpg', 'Bk1GhWY1RPzAPmdS1_LV_1.jpg': 'https://live.staticflickr.com/65535/53763637158_116161fd79_o_d.jpg', 'Bk1GhWs1RhfCD4Z_WV1E_4.jpg': 'https://live.staticflickr.com/65535/53763436536_7a2fecfc9e_o_d.jpg', 'Bk1GhWo1Sj3DUKf1_o4U_2.jpg': 'https://live.staticflickr.com/65535/53762535862_dd41a51c65_o_d.jpg', 'Bk1GhWM08l3DtUuLoFaE_1.jpg': 'https://live.staticflickr.com/65535/53763436561_34aeb811d2_o_d.jpg', 'Bk1GhWg1RhyCKbgWajwi_1.jpg': 'https://live.staticflickr.com/65535/53763637188_5467bd2f03_o_d.jpg', 'Bk1GhVY1RxqDJKSprfWK_2.jpg': 'https://live.staticflickr.com/65535/53763637193_ff5441d1ce_o_d.jpg', 'Bk1GhVw1STjBGjLQ_UC5_1.jpg': 'https://live.staticflickr.com/65535/53762535887_1fe937d7ec_o_d.jpg', 'Bk1GhVM1SzTCDz7pZXrt_1.jpg': 'https://live.staticflickr.com/65535/53763769894_ecda54be09_o_d.jpg', 'Bk1GhVE1RQ-BeVVY_f5n_1.jpg': 'https://live.staticflickr.com/65535/53763436611_e44b048c3d_o_d.jpg', 'Bk1GhVc1STmDWUa1ClFN_1.jpg': 'https://live.staticflickr.com/65535/53763436616_4cb7d14cb9_o_d.jpg', 'Bk1GhV41RxpDLcSEYL5M_1.jpg': 'https://live.staticflickr.com/65535/53763769904_637869cab8_o_d.jpg', 'Bk1GhV01RQ9BgSE3yO5-_1.jpg': 'https://live.staticflickr.com/65535/53763436636_f2bf5e23b2_o_d.jpg', 'Bk1GhUQ08VWC2eINv4iE_1.jpg': 'https://live.staticflickr.com/65535/53763436641_f0f752dea5_o_d.jpg', 'Bk1GhUo1S0ZBIzd-h-4b_1.jpg': 'https://live.staticflickr.com/65535/53763769934_e73f13e7f2_o_d.jpg', 'Bk1GhUk1RQ9BgRqIEAaS_1.jpg': 'https://live.staticflickr.com/65535/53763436656_64d2b4a62f_o_d.jpg', 'Bk1GhUI1SR2AU7OX8nZG_3.jpg': 'https://live.staticflickr.com/65535/53763769949_9cc4f62bba_o_d.jpg', 'Bk1GhUI1SR2AU7OX8nZG_2.jpg': 'https://live.staticflickr.com/65535/53763436661_7f1290d3e6_o_d.jpg', 'Bk1GhUc1SCSBfv746Jp8_9.jpg': 'https://live.staticflickr.com/65535/53763856430_697e031172_o_d.jpg', 'Bk1GhUc1RhkB7W4Vrv75_1.jpg': 'https://live.staticflickr.com/65535/53763637253_ba39c0527a_o_d.jpg', 'Bk1GhU81RgYBzxSsE-Hf_2.jpg': 'https://live.staticflickr.com/65535/53763856450_5aeac14fe4_o_d.jpg', 'Bk1GhU81RgYBzxSsE-Hf_1.jpg': 'https://live.staticflickr.com/65535/53763856455_ce59f5c256_o_d.jpg', 'Bk1GhU01SjSBrYK_RziV_1.jpg': 'https://live.staticflickr.com/65535/53763856460_4ae1ab3981_o_d.jpg', 'Bk1GhTY1SzVBfvSLdEyp_1.jpg': 'https://live.staticflickr.com/65535/53763637263_abe87f0343_o_d.jpg', 'Bk1GhTg08FrAn53wUrJg_2.jpg': 'https://live.staticflickr.com/65535/53763770004_abe87f0343_o_d.jpg', 'Bk1GhTg1S0ZBIxfU5su0_1.jpg': 'https://live.staticflickr.com/65535/53763637268_8a5c0479eb_o_d.jpg', 'Bk1GhTA1Sz3BAmsJ3QoX_1.jpg': 'https://live.staticflickr.com/65535/53763637313_3ce352275b_o_d.jpg', 'Bk1Ght408FrAn3MX-JHQ_1.jpg': 'https://live.staticflickr.com/65535/53763770029_bb4558c231_o_d.jpg', 'Bk1GhT01SkhAHUeFF-a8_1.jpg': 'https://live.staticflickr.com/65535/53762535962_2fc5949674_o_d.jpg', 'Bk1GhSU1SR2AU7OX8nSy_1.jpg': 'https://live.staticflickr.com/65535/53763637318_63ea3f89dc_o_d.jpg', 'Bk1GhSU1SR2AU5vLJFa1_4.jpg': 'https://live.staticflickr.com/65535/53763770034_386ac3168a_o_d.jpg', 'Bk1GhsQ1RQmBgrD5AC_H_3.jpg': 'https://live.staticflickr.com/65535/53763637333_b684a412ae_o_d.jpg', 'Bk1GhSg1Sj3DUJIlVC18_1.jpg': 'https://live.staticflickr.com/65535/53763436726_f101fba021_o_d.jpg', 'Bk1GhS81RiIATWq50c99_1.jpg': 'https://live.staticflickr.com/65535/53763637348_0a9380c1eb_o_d.jpg', 'Bk1GhrY1RxqDJLGnLbix_2.jpg': 'https://live.staticflickr.com/65535/53763856505_cb4a1fd3de_o_d.jpg', 'Bk1GhRU08EVB_U1sv_UA_1.jpg': 'https://live.staticflickr.com/65535/53763436741_aa774440b8_o_d.jpg', 'Bk1GhrA1RR-DDDDvsyk7_4.jpg': 'https://live.staticflickr.com/65535/53763770094_418a309bfc_o_d.jpg', 'Bk1GhR01RxpDLZ2eA6NK_1.jpg': 'https://live.staticflickr.com/65535/53763770099_d0994f632a_o_d.jpg', 'Bk1GhQU1S0TAsO46y55D_1.jpg': 'https://live.staticflickr.com/65535/53763637368_06a609cf9a_o_d.jpg', 'Bk1Ghqs08VWC2bqZCuHG_1.jpg': 'https://live.staticflickr.com/65535/53763856520_9a7980dfef_o_d.jpg', 'Bk1GhQs07jSDumfTvl_b_1.jpg': 'https://live.staticflickr.com/65535/53763436776_ec877d632a_o_d.jpg', 'Bk1GhQo08VWC2bMcgnmC_1.jpg': 'https://live.staticflickr.com/65535/53763637378_67084ed3f1_o_d.jpg', 'Bk1GhQk1SCqAhRJBBBtk_1.jpg': 'https://live.staticflickr.com/65535/53762536012_45350ba484_o_d.jpg', 'Bk1GhQI08FrAn53wUq-L_1.jpg': 'https://live.staticflickr.com/65535/53763856550_3549a43afa_o_d.jpg', 'Bk1GhQg1RR-DDBVqd_OE_2.jpg': 'https://live.staticflickr.com/65535/53763856555_08bbb5ae32_o_d.jpg', 'Bk1GhQ81SlVA9eXwlayg_1.jpg': 'https://live.staticflickr.com/65535/53763637398_f205712cd0_o_d.jpg', 'Bk1GhPY1RiIATXA-66tn_1.jpg': 'https://live.staticflickr.com/65535/53763770159_6a5f5b191d_o_d.jpg', 'Bk1GhPs1RiIATWgUF2CJ_4.jpg': 'https://live.staticflickr.com/65535/53763436826_1c6abe0d8d_o_d.jpg', 'Bk1Ghpo08l3DtXfMZ8lP_1.jpg': 'https://live.staticflickr.com/65535/53763436831_d38368476c_o_d.jpg', 'Bk1GhPo1Rx2BccwKm8-5_1.jpg': 'https://live.staticflickr.com/65535/53763856570_1049e5ecda_o_d.jpg', 'Bk1Ghpk1Sj5Aq71rary1_1.jpg': 'https://live.staticflickr.com/65535/53763856580_4d4ec64b78_o_d.jpg', 'Bk1GhPE1Rh1Auw1t4AcR_1.jpg': 'https://live.staticflickr.com/65535/53762536077_4ff5fed93c_o_d.jpg', 'Bk1GhPc1RQ-BeYVLgdir_1.jpg': 'https://live.staticflickr.com/65535/53763436851_79d844e89a_o_d.jpg', 'Bk1GhP81RSEAK1_2rMOv_1.jpg': 'https://live.staticflickr.com/65535/53763436886_f711e95e64_o_d.jpg', 'Bk1Ghp41SCTC-d94fdPV_1.jpg': 'https://live.staticflickr.com/65535/53763436881_f32574b1e3_o_d.jpg', 'Bk1GhOw1RheBSlLlXFpF_2.jpg': 'https://live.staticflickr.com/65535/53762536112_2be29e39ed_o_d.jpg', 'Bk1GhOs1Sz8B1sITEZhM_2.jpg': 'https://live.staticflickr.com/65535/53763436901_cab6374ed8_o_d.jpg', 'Bk1GhOQ1SlhAvTZoAv97_2.jpg': 'https://live.staticflickr.com/65535/53763856620_d34ae0fbac_o_d.jpg', 'Bk1GhOQ1SlhAvTZoAv97_1.jpg': 'https://live.staticflickr.com/65535/53763637463_e33a8ef3a1_o_d.jpg', 'Bk1GhOo1STmDWVWQf8AH_1.jpg': 'https://live.staticflickr.com/65535/53762536137_fd970cd31f_o_d.jpg', 'Bk1GhOo1Sj3DUI7Gitj8_1.jpg': 'https://live.staticflickr.com/65535/53763436936_954a3f25b3_o_d.jpg', 'Bk1GhoM1SlcBPkU7drBO_1.jpg': 'https://live.staticflickr.com/65535/53762536182_19a93ba3ba_o_d.jpg', 'Bk1GhoI1RgZAFExYCIKI_1.jpg': 'https://live.staticflickr.com/65535/53763436931_acee03ec19_o_d.jpg', 'Bk1GhOA1RheBSm8U11HY_2.jpg': 'https://live.staticflickr.com/65535/53763770239_5f810641e4_o_d.jpg', 'Bk1GhO81SkCApeGNhbAV_1.jpg': 'https://live.staticflickr.com/65535/53763436941_78d0bd8cc7_o_d.jpg', 'Bk1GhO81Rx2BcZI-fjPL_9.jpg': 'https://live.staticflickr.com/65535/53762536187_255d032abe_o_d.jpg', 'Bk1GhO81Rx2BcZI-fjPL_3.jpg': 'https://live.staticflickr.com/65535/53763856670_5fa45df256_o_d.jpg', 'Bk1GhO81RQkDWfbVqHAJ_1.jpg': 'https://live.staticflickr.com/65535/53762536222_be9178302a_o_d.jpg', 'Bk1Gho41STlBB8RbpnuS_1.jpg': 'https://live.staticflickr.com/65535/53763436981_b2c35de77a_o_d.jpg', 'Bk1GhNw1RQ-BeXGuqtv1_1.jpg': 'https://live.staticflickr.com/65535/53762536237_6afa77fcbe_o_d.jpg', 'Bk1GhnU1STjBGgfG8wdb_1.jpg': 'https://live.staticflickr.com/65535/53763436996_26791db0f7_o_d.jpg', 'Bk1GhNo1RR_Cj8wVTPUU_1.jpg': 'https://live.staticflickr.com/65535/53762536252_72b5f99d35_o_d.jpg', 'Bk1Ghnk1SlDBJnFSJ9p-_1.jpg': 'https://live.staticflickr.com/65535/53763770279_4148e8d8e6_o_d.jpg', 'Bk1GhNk1RQ-BeXGuqtu2_1.jpg': 'https://live.staticflickr.com/65535/53763637558_383a4980d3_o_d.jpg', 'Bk1GhN81SR3DuQtEdfkU_1.jpg': 'https://live.staticflickr.com/65535/53762536272_9ae25d6c7d_o_d.jpg', 'Bk1Ghn81S0ZBIx0O96Mi_2.jpg': 'https://live.staticflickr.com/65535/53763437016_d20f9eb555_o_d.jpg', 'Bk1GhMs1Sz7BmupBw4EW_3.jpg': 'https://live.staticflickr.com/65535/53763856705_8b8cd6a5ff_o_d.jpg', 'Bk1GhMs1Sz7BmupBw4EW_2.jpg': 'https://live.staticflickr.com/65535/53763770314_017d217fa5_o_d.jpg', 'Bk1Ghms1SlDBJlScb-zN_3.jpg': 'https://live.staticflickr.com/65535/53762536277_2deb3d3b25_o_d.jpg', 'Bk1GhMk1SR6A2Q0i0PUa_7.jpg': 'https://live.staticflickr.com/65535/53763770319_aace00029f_o_d.jpg', 'Bk1GhMk1SR6A2Q0i0PUa_6.jpg': 'https://live.staticflickr.com/65535/53762536297_ce21defecd_o_d.jpg', 'Bk1GhMk1SR6A2Q0i0PUa_5.jpg': 'https://live.staticflickr.com/65535/53762536312_27434cebfb_o_d.jpg', 'Bk1GhMk1S0ZBIxfU5sZ8_2.jpg': 'https://live.staticflickr.com/65535/53763637588_fd04ed911f_o_d.jpg', 'Bk1GhMI1RhCCl-ouADDT_1.jpg': 'https://live.staticflickr.com/65535/53763856745_67388038b3_o_d.jpg', 'Bk1GhlY1SzVBfzCGp2l8_3.jpg': 'https://live.staticflickr.com/65535/53762536322_f6f172b73a_o_d.jpg', 'Bk1Ghlw1Sj5ArBwjXftu_1.jpg': 'https://live.staticflickr.com/65535/53763856755_bc8c79865e_o_d.jpg', 'Bk1GhLg1RgZAFEjpfQ3s_1.jpg': 'https://live.staticflickr.com/65535/53763856760_43ac68e079_o_d.jpg', 'Bk1GhLc1SkCApedxv3Ar_1.jpg': 'https://live.staticflickr.com/65535/53763437066_0f0296473e_o_d.jpg', 'Bk1GhLc1RPzAPk19lIh3_22.jpg': 'https://live.staticflickr.com/65535/53763637618_1a65797c91_o_d.jpg', 'Bk1GhLc1RPzAPk19lIh3_21.jpg': 'https://live.staticflickr.com/65535/53763437076_12f4d269c0_o_d.jpg', 'Bk1GhLc1RPzAPk19lIh3_18.jpg': 'https://live.staticflickr.com/65535/53763437086_5346edb6e0_o_d.jpg', 'Bk1GhLc1RPzAPk19lIh3_9.jpg': 'https://live.staticflickr.com/65535/53763856795_ceb8568401_o_d.jpg', 'Bk1GhL41SkVAwcoMmi72_1.jpg': 'https://live.staticflickr.com/65535/53763856820_11a54655a2_o_d.jpg', 'Bk1GhL41RhjDro9C15vj_1.jpg': 'https://live.staticflickr.com/65535/53763856825_cb1ca07f03_o_d.jpg', 'Bk1GhKw08U7BDE40R4Cu_2.jpg': 'https://live.staticflickr.com/65535/53762536402_3acae52a33_o_d.jpg', 'Bk1Ghkc1SlcBPkU7dqyT_1.jpg': 'https://live.staticflickr.com/65535/53763437116_d67a17aa2d_o_d.jpg', 'Bk1GhjA1RhCCmBZ0VTIo_5.jpg': 'https://live.staticflickr.com/65535/53762536412_4af7d29d3d_o_d.jpg', 'Bk1Ghj01RR-DDBVqeATQ_1.jpg': 'https://live.staticflickr.com/65535/53762536422_9b0a83e827_o_d.jpg', 'Bk1Ghik1SzTCD077SSD3_25.jpg': 'https://live.staticflickr.com/65535/53763637673_5b8bf82764_o_d.jpg', 'Bk1Ghik1SzTCD077SSD3_12.jpg': 'https://live.staticflickr.com/65535/53762536427_c778552e3c_o_d.jpg', 'Bk1Ghik1SzTCD077SSD3_8.jpg': 'https://live.staticflickr.com/65535/53762536452_27bc9a1fb9_o_d.jpg', 'Bk1Ghik1SzTCD077SSD3_7.jpg': 'https://live.staticflickr.com/65535/53762536462_89686d9b18_o_d.jpg', 'Bk1GhiI1SlhAvRCIR_-t_1.jpg': 'https://live.staticflickr.com/65535/53763770464_5f795f74da_o_d.jpg', 'Bk1GhiA1SDRDN4HthKpX_1.jpg': 'https://live.staticflickr.com/65535/53763856840_661a7d5903_o_d.jpg', 'Bk1Ghi41RhCCmAFFWsOq_1.jpg': 'https://live.staticflickr.com/65535/53763637708_5b23ae322d_o_d.jpg', 'Bk1Ghho08EVB_Uj6QXis_3.jpg': 'https://live.staticflickr.com/65535/53763637713_0ccc38fc2b_o_d.jpg', 'Bk1Ghhk1STmDWXieH4hj_1.jpg': 'https://live.staticflickr.com/65535/53763437166_493c2d9550_o_d.jpg', 'Bk1GhhA1SkJASpLSZ2ra_2.jpg': 'https://live.staticflickr.com/65535/53762536507_745387f62c_o_d.jpg', 'Bk1Ghh81SkhAHUUpdfvm_1.jpg': 'https://live.staticflickr.com/65535/53763437176_8e263dc787_o_d.jpg', 'Bk1GhgY1Sz7Bmud5Zhb3_1.jpg': 'https://live.staticflickr.com/65535/53763437186_cdf129ecfc_o_d.jpg', 'Bk1GhgY1RhmBe1Roj5Rc_1.jpg': 'https://live.staticflickr.com/65535/53763770514_8c44b367e5_o_d.jpg', 'Bk1Ghgw1RhkB7cOm_FC0_1.jpg': 'https://live.staticflickr.com/65535/53763770519_3346575364_o_d.jpg', 'Bk1GhgQ1RPwAjSfawV05_1.jpg': 'https://live.staticflickr.com/65535/53763637728_205dffdd36_o_d.jpg', 'Bk1Ghgk1SkVAwaauuhwv_1.jpg': 'https://live.staticflickr.com/65535/53762536552_c34770e1ba_o_d.jpg', 'Bk1Ghgk1RhnAjGqBypnk_1.jpg': 'https://live.staticflickr.com/65535/53763770524_f30f7e3483_o_d.jpg', 'Bk1Ghgg1SkVAwanQUz1P_1.jpg': 'https://live.staticflickr.com/65535/53763437221_4e339ebeaf_o_d.jpg', 'Bk1GhgE1SzoCgkDA2aPw_3.jpg': 'https://live.staticflickr.com/65535/53763856920_2b1287c3ef_o_d.jpg', 'Bk1GhgA1Sz8B1sITEaF-_21.jpg': 'https://live.staticflickr.com/65535/53763437226_bb82a2243f_o_d.jpg', 'Bk1GhgA1Sz8B1sITEaF-_19.jpg': 'https://live.staticflickr.com/65535/53763637753_936686502d_o_d.jpg', 'Bk1GhgA1Sz8B1sITEaF-_11.jpg': 'https://live.staticflickr.com/65535/53763770534_b7cb004106_o_d.jpg', 'Bk1GhgA1SkJASo2d4FkH_1.jpg': 'https://live.staticflickr.com/65535/53763856955_f5a3dbe8cb_o_d.jpg', 'Bk1Ghg81Sz2AtCmKIcFV_1.jpg': 'https://live.staticflickr.com/65535/53763437291_938c78ce6c_o_d.jpg', 'Bk1GhfM1RQmBgsdYS6dF_1.jpg': 'https://live.staticflickr.com/65535/53762536592_8750256b50_o_d.jpg', 'Bk1GhfI1RhnAjGqBypkn_1.jpg': 'https://live.staticflickr.com/65535/53762536597_300bd8166e_o_d.jpg', 'Bk1Ghf81RQjASZWa-b1p_1.jpg': 'https://live.staticflickr.com/65535/53763437321_1ff5209be0_o_d.jpg', 'Bk1Ghek1Sj5ArBwjXfYL_1.jpg': 'https://live.staticflickr.com/65535/53762536602_e9641bd91d_o_d.jpg', 'Bk1Ghd01SCqAhP_rhNK-_2.jpg': 'https://live.staticflickr.com/65535/53763770559_358e598bd4_o_d.jpg', 'Bk1GhcY1RhjDrqQDe_-q_2.jpg': 'https://live.staticflickr.com/65535/53763770574_c5e5810b3c_o_d.jpg', 'Bk1GhcU1S2EChINyqmbN_1.jpg': 'https://live.staticflickr.com/65535/53763637783_9253d97d5a_o_d.jpg', 'Bk1Ghco1RhfCD4SXxtZs_1.jpg': 'https://live.staticflickr.com/65535/53763770579_7ae058fee8_o_d.jpg', 'Bk1GhcA1SzPBwoxY8KRE_1.jpg': 'https://live.staticflickr.com/65535/53763437356_7ef852e0ba_o_d.jpg'}

def mllm_openai(query, images, model, conversation_history):
    api_key=os.environ.get('DASHSCOPE_API_KEY', None)
    api_base = "https://dashscope.aliyuncs.com/compatible-mode/v1"
    client = OpenAI(api_key=api_key, base_url=api_base)

    modified_conversation_history = [
        {"role": message["role"], "content": message["content"]}
        for message in conversation_history
    ]
    
    messages = [{"role": "system", "content": [{'type': 'text', 'text': "You are a helpful assistant."}]}]
    # messages = []
    messages.extend(modified_conversation_history)
    

    if len(images)!=0:
        messages.append({
            "role": "user",
            "content": [
                {"type": "text", "text": query},
                *[{"type": "image_url", "image_url": {"url": f"{image}"}} for image in images],
            ],
        })
    
        conversation_history.append({
            "role": "user",
            "content": [
                {"type": "text", "text": query},
                *[{"type": "image_url", "image_url": {"url": f"{image}"}} for image in images],
            ],
        })
        # print(messages)
    else:
        messages.append({"role": "user", "content": [{"type": "text", "text": query}]})
        conversation_history.append({"role": "user", "content": [{"type": "text", "text": query}]})

    response = client.chat.completions.create(
        model=model,
        messages=messages,
    )

    assistant_response = response.choices[0].message.content
    assistant_response[0]['type'] = 'text'
    conversation_history.append({"role": "assistant", "content": assistant_response})
    return assistant_response, conversation_history



class QwenVLAPI_mimt:

    is_api: bool = True

    def __init__(self,
                 model: str = 'qwen-vl-plus',
                 retry: int = 5,
                 wait: int = 5,
                 key: str = None,
                 verbose: bool = True,
                 temperature: float = 0.0,
                 system_prompt: str = None,
                 max_tokens: int = 1024,
                 proxy: str = None,
                 **kwargs):

        assert model in ['qwen-vl-plus', 'qwen-vl-max']
        self.model = model
        self.fail_msg = 'Failed to obtain answer via API. '
        self.max_tokens = max_tokens
        self.temperature = temperature
        if key is None:
            key = os.environ.get('DASHSCOPE_API_KEY', None)
        assert key is not None, (
            'Please set the API Key (obtain it here: '
            'https://help.aliyun.com/zh/dashscope/developer-reference/vl-plus-quick-start)'
        )

    def generate(self, message, dataset=None):
        # return ['a1','a2','a3']
        img_paths = []
        questions = []
        for item in message:
            if item['type'] == 'image':
                img_paths.append(item['value'])
            elif item['type'] == 'text':
                questions.append(item['value'])
        questions = eval(questions[0])

        responses = []
        try:
            pics_number = 0
            history = []
            for index, q in enumerate(questions):
                if "<ImageHere>" in q:
                    tag_number = q.count('<ImageHere>')
                    if tag_number ==1:
                        pics_number += 1
                        images = [img_paths[pics_number-1]]
                    else:
                        pics_number_end = pics_number+tag_number
                        images = img_paths[pics_number: pics_number_end]
                        pics_number += tag_number
                    logging.info(pics_number)
                else:
                    images = []

                images = [
                    im2url[
                        image.split("/")[-1]
                        ]
                    for image in images
                ]
                response, history = mllm_openai(query=q, images=images, model=self.model, conversation_history=history)
                responses.append(response[0]["text"])
        except Exception as e:
            print({e})
        return responses
            
